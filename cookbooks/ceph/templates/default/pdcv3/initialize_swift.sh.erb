#!/bin/bash
## This file managed by Chef, all changes will be overwritten ##
    source /root/admin_auth

    #keystone user-create --name=cinder --pass=<%= node['cinder']['passwd'] %> --email='admin@opensciencedatacloud.org'
    #keystone user-role-add --user=cinder --tenant=service --role=admin
    #keystone service-create --name=cinder --type=volume --description="OpenStack Block Storage"
    #keystone endpoint-create --service-id=$(keystone service-list | awk '/ volume / {print $2}') --publicurl=http://<%= node['cinder']['host'] %>:8776/v1/%\(tenant_id\)s --internalurl=http://<%= node['cinder']['host'] %>:8776/v1/%\(tenant_id\)s --adminurl=http://<%= node['cinder']['host'] %>:8776/v1/%\(tenant_id\)s

    #keystone service-create --name=cinderv2 --type=volumev2 --description="OpenStack Block Storage v2"
    #keystone endpoint-create --service-id=$(keystone service-list | awk '/ volumev2 / {print $2}') --publicurl=http://<%= node['cinder']['host'] %>:8776/v2/%\(tenant_id\)s --internalurl=http://<%= node['cinder']['host'] %>:8776/v2/%\(tenant_id\)s --adminurl=http://<%= node['cinder']['host'] %>:8776/v2/%\(tenant_id\)s
 
    keystone service-create --name=swift --type=object-store --description="OpenStack Object Storage" 
    keystone endpoint-create --service-id $(keystone service-list | awk '/ object-store / {print $2}') --publicurl http://<%= node['ceph']['raidos_host'] %>/swift/v1 --internalurl http://<%= node['ceph']['raidos_host'] %>/swift/v1 --adminurl http://<%= node['ceph']['raidos_host'] %>/swift/v1

# This file was auto-generated by Chef for <%=node['ipaddress']%>
