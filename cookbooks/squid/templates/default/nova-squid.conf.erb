# This file dropped off by Chef, all changes will be overwritten.
# This file is included by the main squid.conf file 

# <%= 'node["nova"]["host"]' %>
#metadata-pdc.opensciencedatacloud.org
acl Safe_ports_metadata port 5984 #non ssl
acl Safe_ports_metadata port 80 #non ssl
acl Safe_ports_metadata port 6984 #ssl
acl Safe_ports_metadata port 443 #ssl
acl SSL_ports_metadata port 6984
acl SSL_ports_metadata port 443

#OpenStack API
acl OpenStack port 5000
acl OpenStack port 8776
acl OpenStack port 6666
acl OpenStack port 9292
acl OpenStack port 35357
acl OpenStack port 6081
acl OpenStack port 8773
acl OpenStack port 8774
acl OpenStack port 9191
acl OpenStack port 8775

acl KeyService dstdomain ks.osdc.io keyservice.opensciencedatacloud.org
acl MetadataService dstdomain metadata-pdc.opensciencedatacloud.org
acl nova dstdomain cloud-controller cloud-proxy api-bionimbus-pdc.opensciencedatacloud.org 10.16.0.149 172.16.191.254

http_access allow Safe_ports KeyService
http_access allow Safe_ports_metadata MetadataService
http_access allow Safe_ports MetadataService
http_access allow OpenStack nova

http_access allow SSL_ports_metadata CONNECT

# This file was auto-generated by Chef for <%=node['ipaddress']%>
